<!DOCTYPE html>
<html lang="en">
<%- include('layouts/header'); -%>

    <body>
        <!-- Navigation-->
        <%- include('layouts/navbar'); -%>
            <!-- Page Header-->
            <header class="masthead" style="background-image: url('assets/img/g2.jpg')">
                <div class="container position-relative px-4 px-lg-5">
                    <div class="row gx-4 gx-lg-5 justify-content-center">
                        <div class="col-md-10 col-lg-8 col-xl-7">
                            <div class="page-heading">
                                <h1>Appointment</h1>
                                <span class="subheading">Please Release a Date for a Driver to Book RoadTest</span>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <!-- Main Content-->
            <main class="mb-4">

                <% if( typeof errs !=='undefined' && errs !=null && errs.length> 0) {%>
                    <ul class="list-group">
                        <% for ( let i in errs ) {%>
                            <li class="list-group-item list-group-item-danger">
                                <%= errs[i] %>
                            </li>
                            <% } %>
                                <li class="list-group-item list-group-item-danger">Please add another slot</li>
                    </ul>
                    <% } %>
                        <div class="container px-4 px-lg-5">
                            <div class="row gx-4 gx-lg-5 justify-content-center">
                                <div class="col-md-10 col-lg-8 col-xl-7">
                                    <div class="my-5">

                                        <% if( typeof success !=='undefined' && success !=null && success.length> 0) {%>
                                            <ul class="list-group">

                                                <% for ( let i of success ) {%>
                                                    <li class="list-group-item list-group-item-success">
                                                        <%= i %>
                                                    </li>
                                                    <% } %>

                                            </ul>
                                            <% } %>
                                                <form action="/selectDate" method="POST">
                                                    <div class="form-floating">
                                                        <div class="col-252">
                                                            <label>
                                                                <h4>Appointment Slots</h4>
                                                            </label>
                                                        </div>

                                                    </div>
                                                    <br>

                                                    <div class="form-floating">
                                                        <div class="col-752">
                                                            <input type="Date" class="inp2" id="DOB" name="Date"
                                                                placeholder="Date" required>
                                                        </div>
                                                    </div>
                                                    <br>

                                                    <div class="form-floating">
                                                        <input type="submit" value="Select the Date"
                                                            class='btn btn-primary text-uppercase p-3'>
                                                    </div>
                                                </form>


                                                <% if( typeof available !=='undefined' && available !=null &&
                                                    available.length> 0) {
                                                    console.log(available,"date",Date) %>
                                                    <br>
                                                    <div class="form-floating">

                                                        <input type="text" class="form-control disable" disabled
                                                            name="Date" placeholder="Date" value=<%- `"${Date}"` -%>
                                                        >
                                                        <label for="date">Appointment Date</label>

                                                    </div>
                                                    <br>

                                                    <form action="/createSlot" method="POST">

                                                        <div class="form-floating">
                                                            <div class="col-752">
                                                                <input type="hidden" class="inp2" name="Date"
                                                                    placeholder="Date" value=<%- `"${Date}"` -%> >

                                                            </div>
                                                        </div>
                                                        <div class="form-floating">
                                                            <p style="display: inline-block;">Appointment Time</p>
                                                            <select style="display: inline-block;" name="Time">

                                                                <% for ( let i of available ) {%>
                                                                    <option value=<%- `"${i}"` -%> >
                                                                        <%= i %>
                                                                    </option>
                                                                    <% } %>
                                                            </select>
                                                        </div>
                                                        <br>
                                                        <div class="form-floating">
                                                            <div class="col-752">
                                                                <input type="submit" value="Add Slot"
                                                                    class='btn btn-primary text-uppercase p-3'>
                                                            </div>

                                                        </div>
                                                    </form>
                                                    <% } %>

                                    </div>
                                </div>
                            </div>
                        </div>

            </main>
            <!-- Footer-->
            <!-- Footer-->
            <%- include('layouts/footer'); -%>
                <%- include('layouts/scripts'); -%>
    </body>

</html>

</body>

</html>